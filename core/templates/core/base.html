{% load static %}
<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Accueil{% endblock %}</title>
    <!-- Chargement de la bibliothèque CSS DaisyUI -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@2.51.5/dist/full.css" rel="stylesheet" type="text/css" />
    <!-- Chargement de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chargement d'Alpine.js pour les interactions frontend -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <!-- Chargement de htmx pour les interactions frontend -->
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body, html, input, button, textarea, select {
            font-family: 'Inter', 'Segoe UI', 'Arial', sans-serif !important;
        }
        /* Scrollbar styling global, thème bleu nuit moderne */
        ::-webkit-scrollbar {
            width: 10px;
            background: linear-gradient(180deg, #1e293b 60%, #1e40af 100%);
            border-radius: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #334155 60%, #2563eb 100%);
            border-radius: 8px;
            border: 2px solid #0f172a;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #2563eb 60%, #1e40af 100%);
        }
        ::-webkit-scrollbar-corner {
            background: #0f172a;
        }
        html {
            scrollbar-color: #2563eb #1e293b;
            scrollbar-width: thin;
        }
    </style>
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
</head>
<body class="bg-gradient-to-br from-gray-900 to-blue-900 min-h-screen font-sans text-white flex flex-col">
    {% block navbar %}
    <nav class="w-full z-30 top-0 bg-white/10 border-b border-white/30 shadow-lg shadow-blue-900/10 backdrop-blur-md transition-all duration-300" style="background:rgba(255,255,255,0.07);backdrop-filter:blur(12px);position:static;">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <a href="{% url 'home' %}" class="text-xl font-extrabold tracking-wide text-white hover:text-blue-400 transition duration-200 hover:scale-110 active:scale-105 drop-shadow-lg">Accueil</a>
            <div class="flex items-center gap-6">
                {% block navbar_right %}{% endblock %}
                {% if user.is_authenticated %}
                <form method="post" action="{% url 'account_logout' %}">
                    {% csrf_token %}
                    <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold px-4 py-2 rounded-lg shadow-lg transition-transform duration-200 hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-red-400">
                        Déconnexion
                    </button>
                </form>
                {% endif %}
            </div>
        </div>
    </nav>
    {% endblock %}
    <div class="container mx-auto p-4 flex-grow pt-16">
        <!-- Bloc de contenu principal à remplacer dans les templates enfants -->
        {% block content %}{% endblock %}
    </div>
<footer class="bg-transparent text-center text-white py-4 mt-auto w-full">
    Institut Superieur Pedagogique et Technique de Likasi
</footer>
<!-- Script pour confirmation de suppression et effet fade-out -->
<script>
    document.body.addEventListener('htmx:configRequest', function(evt) {
        var elt = evt.target;
        // Confirmation pour les formulaires de suppression
        if (elt.matches('form[data-confirm]')) {
            if (!confirm(elt.getAttribute('data-confirm'))) {
                evt.preventDefault();
            }
        }
    });
    // Fade out sur suppression d'une publication ou d'un commentaire
    document.body.addEventListener('htmx:beforeSwap', function(evt) {
        if (evt.detail.xhr && evt.detail.xhr.status === 204 && (evt.target.classList.contains('publication-card') || evt.target.classList.contains('commentaire-item'))) {
            evt.detail.shouldSwap = false;
            evt.target.style.transition = 'opacity 0.4s';
            evt.target.style.opacity = 0;
            setTimeout(function() {
                evt.target.remove();
            }, 400);
        }
    });
</script>
</body>
</html>

<!--
    Template de base : base.html
    Définit la structure HTML commune à toutes les pages :
    - Chargement des librairies CSS/JS (DaisyUI, Tailwind, Alpine.js, HTMX)
    - Navbar par défaut (surchargée dans les enfants si besoin)
    - Bloc de contenu principal (à remplacer dans les templates enfants)
    - Footer commun
    - Styles globaux (scrollbar, police, etc.)
    - Scripts pour confirmation de suppression et effet fade-out sur les suppressions
-->
